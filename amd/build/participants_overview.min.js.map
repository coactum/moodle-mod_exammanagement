{"version":3,"sources":["../src/participants_overview.js"],"names":["define","$","init","tasks","attr","css","first","focus","each","participantid","split","count","val","prop","change","removeClass","click","not"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * functions for participants overview page\n *\n * @module      mod_exammanagement/import_bonus\n * @copyright   coactum GmbH 2019\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function ($) {\n\n  return {\n    init: function (tasks) {\n\n      // create input type number elements\n      $(\"form.mform input[type=text]\").attr(\"type\", \"number\");\n\n      var styles = {\n        \"-webkit-appearance\": \"textfield\",\n        \"-moz-appearance\": \"textfield\",\n        \"margin-left\": \"10px\",\n        \"width\": \"65px\"\n      };\n\n      $(\"form.mform input[type=number]\").css(styles);\n      $(\"form.mform input[type=number]\").attr(\"step\", \"0.01\");\n      $(\"form.mform input[type=number]\").attr(\"min\", \"0\");\n\n      $(\"[id^=id_points]\").first().focus();\n\n      $(\"[id^=id_points]\").each(function () {\n\n        var participantid = $(this).attr(\"id\").split('_')[2];\n        var count = $(this).attr(\"id\").split('_')[3];\n\n        $(this).attr(\"max\", tasks[count]); // set maximum points for tasks\n\n        if ($(\"#id_state_\"+participantid).val() !== 'normal' && $(\"#id_state_\"+participantid).val() !== 'not_set') {\n          $(this).prop(\"disabled\", true); //initial disabling point fields if examstate is not normal or not set\n        }\n      });\n\n      // if exam bonus steps change\n      $(\"[id^=id_bonussteps]\").change(function () {\n        var participantid = $(this).attr(\"id\").split('_')[2];\n\n        if ($(this).val() !== '-'){\n          $(\"#id_bonuspoints_\"+participantid).val('-');  // reset bonus points\n          $(\"#id_bonuspoints_\"+participantid).prop(\"disabled\", true); // disable bonuspoints\n        } else {\n          $(\"#id_bonuspoints_\"+participantid).prop(\"disabled\", false); // enable bonuspoints\n        }\n\n        $(\"#id_state_\"+participantid).focus(); // move focus\n      });\n\n      // if exam bonus points change\n      $(\"[id^=id_bonuspoints]\").change(function () {\n        var participantid = $(this).attr(\"id\").split('_')[2];\n\n        if ($(this).val()){\n          $(\"#id_bonussteps_\"+participantid).val('-'); // reset bonus steps\n          $(\"#id_state_\"+participantid).focus(); // move focus\n        }\n      });\n\n      // if exam points are entered\n      $(\"[id^=id_points]\").change(function () {\n        var participantid = $(this).attr(\"id\").split('_')[2];\n        $(\"#id_state_\"+participantid).val('normal');\n      });\n\n      //if examstate changes\n      $(\"[id^=id_state]\").change(function () {\n        var participantid = $(this).attr(\"id\").split('_')[2];\n\n        if ($(this).val() !== 'normal' && $(this).val() !== 'not_set') { // if examstate is now not normal or not set: disable all point-fields and set their value to 0\n          $(\"[id^=id_points_\"+participantid+\"]\").each(function () {\n            $(this).prop(\"disabled\", true);\n            $(this).val(0);\n          });\n        } else if($(this).val() === 'normal'){  // if examstate is now normal\n          $(\"[id^=id_points_\"+participantid+\"]\").each(function () { // enable all point-fields\n            $(this).prop(\"disabled\", false);\n            $(\"[id^=id_points_\"+participantid+\"\").first().focus();\n          });\n        } else if($(this).val() == 'not_set'){\n          $(\"[id^=id_points_\"+participantid+\"]\").each(function () { // enable all point-fields\n            $(this).val('');\n            $(this).prop(\"disabled\", false);\n            $(\"[id^=id_points_\"+participantid+\"\").first().focus();\n          });\n        }\n      });\n\n      // remove cols from form layout\n      $('.exammanagement_table div').removeClass('col-md-3');\n      $('.exammanagement_table div').removeClass('col-md-9');\n\n      $('form.mform #id_submitbutton').click(function () {  // if submittbutton is pressed enable complete form (for moodle purposes)\n\n        $(\"form.mform .form-group input.form-control\").not(\"[id^=id_bonuspoints]\").each(function () { // enable all point-fields\n          $(this).prop(\"disabled\", false);\n        });\n      });\n    }\n  };\n});\n"],"file":"participants_overview.min.js"}