{"version":3,"sources":["../src/participants_overview.js"],"names":["define","$","init","tasks","attr","css","length","first","focus","each","participantid","split","count","val","prop","change","removeClass","click","not"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * functions for participants overview page\n *\n * @module      mod_exammanagement/import_bonus\n * @copyright   2022 coactum GmbH\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function ($) {\n\n  return {\n    init: function (tasks) {\n\n      // create input type number elements\n      $(\"form.mform input[type=text]\").attr(\"type\", \"number\");\n\n      var styles = {\n        \"-webkit-appearance\": \"textfield\",\n        \"-moz-appearance\": \"textfield\",\n        \"margin-left\": \"10px\",\n        \"width\": \"70px\"\n      };\n\n      $(\"form.mform input[type=number]\").css(styles);\n      $(\"form.mform input[type=number]\").attr(\"step\", \"0.01\");\n      $(\"form.mform input[type=number]\").attr(\"min\", \"0\");\n\n      if($(\"[id^=id_points]\").length !== 0){\n        $(\"[id^=id_points]\").first().focus();\n      } else {\n        $(\"[id^=id_bonuspoints]\").first().focus();\n      }\n\n      $(\"[id^=id_points]\").each(function () {\n\n        var participantid = $(this).attr(\"id\").split('_')[2];\n        var count = $(this).attr(\"id\").split('_')[3];\n\n        $(this).attr(\"max\", tasks[count]); // set maximum points for tasks\n\n        if ($(\"#id_state_\"+participantid).val() !== 'normal' && $(\"#id_state_\"+participantid).val() !== 'not_set') {\n          $(this).prop(\"disabled\", true); //initial disabling point fields if examstate is not normal or not set\n        }\n      });\n\n      $(\"[id^=id_bonuspoints]\").each(function () {\n\n        var participantid = $(this).attr(\"id\").split('_')[2];\n\n        if ($(\"#id_bonussteps_\"+participantid).val() && $(\"#id_bonussteps_\"+participantid).val() !== '-') {\n          $(this).prop(\"disabled\", true); //initial disabling bonuspoint fields if bonusstep is set\n        }\n      });\n\n      // if exam bonus steps change\n      $(\"[id^=id_bonussteps]\").change(function () {\n        var participantid = $(this).attr(\"id\").split('_')[2];\n\n        if ($(this).val() !== '-'){\n          $(\"#id_bonuspoints_\"+participantid).val('-');  // reset bonus points\n          $(\"#id_bonuspoints_\"+participantid).prop(\"disabled\", true); // disable bonuspoints\n        } else {\n          $(\"#id_bonuspoints_\"+participantid).prop(\"disabled\", false); // enable bonuspoints\n        }\n\n        $(\"#id_state_\"+participantid).focus(); // move focus\n\n        $('input[name=\"bonuspoints_entered['+participantid+']\"]').val(0);  // set bonuspoints entered to true\n      });\n\n      // if exam bonus points change\n      $(\"[id^=id_bonuspoints]\").change(function () {\n        var participantid = $(this).attr(\"id\").split('_')[2];\n\n        if ($(this).val()){\n          $(\"#id_bonussteps_\"+participantid).val('-'); // reset bonus steps\n          $(\"#id_state_\"+participantid).focus(); // move focus\n          $('input[name=\"bonuspoints_entered['+participantid+']\"]').val(1);  // set bonuspoints entered to true\n        }\n      });\n\n      // if exam points are entered\n      $(\"[id^=id_points]\").change(function () {\n        var participantid = $(this).attr(\"id\").split('_')[2];\n        $(\"#id_state_\"+participantid).val('normal');\n      });\n\n      //if examstate changes\n      $(\"[id^=id_state]\").change(function () {\n        var participantid = $(this).attr(\"id\").split('_')[2];\n\n        if ($(this).val() !== 'normal' && $(this).val() !== 'not_set') { // if examstate is now not normal or not set: disable all point-fields and set their value to 0\n          $(\"[id^=id_points_\"+participantid+\"]\").each(function () {\n            $(this).prop(\"disabled\", true);\n            $(this).val(0);\n          });\n        } else if($(this).val() === 'normal'){  // if examstate is now normal\n          $(\"[id^=id_points_\"+participantid+\"]\").each(function () { // enable all point-fields\n            $(this).prop(\"disabled\", false);\n            $(\"[id^=id_points_\"+participantid+\"\").first().focus();\n          });\n        } else if($(this).val() == 'not_set'){\n          $(\"[id^=id_points_\"+participantid+\"]\").each(function () { // enable all point-fields\n            $(this).val('');\n            $(this).prop(\"disabled\", false);\n            $(\"[id^=id_points_\"+participantid+\"\").first().focus();\n          });\n        }\n      });\n\n      // remove cols from form layout\n      $('.exammanagement_table div').removeClass('col-md-3');\n      $('.exammanagement_table div').removeClass('col-md-9');\n\n      $('form.mform #id_submitbutton').click(function () {  // if submittbutton is pressed enable complete form (for moodle purposes)\n\n        $(\"form.mform .form-group input.form-control\").not(\"[id^=id_bonuspoints]\").each(function () { // enable all point-fields\n          $(this).prop(\"disabled\", false);\n        });\n      });\n    }\n  };\n});\n"],"file":"participants_overview.min.js"}