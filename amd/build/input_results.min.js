define(["jquery","core/notification"],function(a){var b=function(a){var b=a.attr("id").split("_").pop();return b},c=function(){var c=0;return a(".form-group input.form-control").each(function(){"matrnr"!=b(a(this))&&(c+=parseInt(a(this).val()))}),c};return{init:function(){var d=a("#id_matrnr").val();d&&a("#id_matrnr").prop("disabled",!0),a(".form-group input.checkboxgroup1").each(function(){a(this).prop("checked")&&a(".form-group input.form-control").each(function(){"matrnr"!=b(a(this))&&a(this).prop("disabled",!0)})}),a(":checkbox").change(function(){var c=!1,d=a(this).prop("id");a(".form-group input.checkboxgroup1").each(function(){a(this).prop("checked")&&(c=!0)}),c?("id_state_nt"==d?(a("#id_state_fa").prop("checked",!1),a("#id_state_ill").prop("checked",!1)):"id_state_fa"==d?(a("#id_state_nt").prop("checked",!1),a("#id_state_ill").prop("checked",!1)):"id_state_ill"==d&&(a("#id_state_nt").prop("checked",!1),a("#id_state_fa").prop("checked",!1)),a(".form-group input.form-control").each(function(){"matrnr"!=b(a(this))&&(a(this).prop("disabled",!0),a(this).val(0))})):a(".form-group input.form-control").each(function(){"matrnr"!=b(a(this))&&a(this).prop("disabled",!1)})}),a(".form-group").on("change","input",function(){if("matrnr"!=b(a(this))){var d=a(this).val().search(/^[0-9]+(\.[0-9]){0,1}$/);d!=-1?a("#totalpoints").text(c()):(a(this).val(0),require(["core/notification"],function(a){a.addNotification({message:"Ungültige Punktzahl",type:"error"})}));var e=parseInt(a(this).val()),f=parseInt(a("#max_points_"+b(a(this))).text());e>f&&(a(this).val(f),require(["core/notification"],function(a){a.addNotification({message:"Höchstpunktzahl überschritten",type:"error"})}))}}),a("#totalpoints").text(c()),a("#id_submitbutton").click(function(){a(".id_matrnr").each(function(){a(this).prop("disabled",!1)})})}}});