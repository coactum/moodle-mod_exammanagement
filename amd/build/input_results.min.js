define(["jquery","core/notification"],function(a){var b=function(a){var b=a.attr("id").split("_").pop();return b},c=function(){var c=0;return a(".form-group input.form-control").each(function(){"matrnr"!=b(a(this))&&(c+=parseInt(a(this).val()))}),c},d=function(a){var b,c,d=decodeURIComponent(window.location.search.substring(1)),e=d.split("&");for(c=0;c<e.length;c++)if(b=e[c].split("="),b[0]===a)return void 0===b[1]||b[1]};return{init:function(){var e=a("#id_matrnr").val();e?a("#id_matrnr").prop("disabled",!0):(a(".form-group input.form-control").each(function(){"matrnr"!=b(a(this))&&a(this).prop("disabled",!0)}),a(".form-group input.checkboxgroup1").each(function(){a(this).prop("disabled",!0)}),a("#id_submitbutton").each(function(){a(this).prop("disabled",!0)})),a(".form-group input.checkboxgroup1").each(function(){a(this).prop("checked")&&a(".form-group input.form-control").each(function(){"matrnr"!=b(a(this))&&a(this).prop("disabled",!0)})}),a(":checkbox").change(function(){var c=!1;a(".form-group input.checkboxgroup1").each(function(){a(this).prop("checked")&&(c=!0)}),c?a(".form-group input.form-control").each(function(){"matrnr"!=b(a(this))&&a(this).prop("disabled",!0)}):a(".form-group input.form-control").each(function(){"matrnr"!=b(a(this))&&a(this).prop("disabled",!1)})}),a(".form-group").on("change","input",function(){if("matrnr"!=b(a(this))){var e=a(this).val().search(/^[0-9]+(\.[0-9]){0,1}$/);e!=-1?a("#totalpoints").text(c()):(a(this).val(0),require(["core/notification"],function(a){a.addNotification({message:"Ungültige Punktzahl",type:"error"})}))}a("#id_matrnr").blur(function(){var b=a(this).val(),c=d("id");location.href="inputResults.php?id="+c+"&matrnr="+b})}),a("#totalpoints").text(c()),a("#id_submitbutton").click(function(){a(".form-group input.form-control").each(function(){a(this).prop("disabled",!1)}),a(".form-group input.checkboxgroup1").each(function(){a(this).prop("disabled",!1)}),a("#id_submitbutton").each(function(){a(this).prop("disabled",!1)})})},check_max_points:function(){a(".form-group").on("change","input",function(){var c=b(a(this));if("matrnr"!=c){var d=parseInt(a(this).val()),e=parseInt(a("#max_points_"+c).text());d>e&&(a(this).val(e),require(["core/notification"],function(a){a.addNotification({message:"Höchstpunktzahl überschritten",type:"error"})}))}})}}});