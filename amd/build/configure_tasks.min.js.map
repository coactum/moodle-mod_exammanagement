{"version":3,"sources":["../src/configure_tasks.js"],"names":["define","$","getTotalpoints","totalpoints","newval","each","parseFloat","val","toFixed","replace","getTaskCount","taskcount","init","attr","css","on","text","addtask","click","newtaskcount","temp","append","parseInt","removetask","remove"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * functions for tracking changes of input fields, adding and removing tasks and creating input type number fields\n *\n * @module      mod_exammanagement/configure_tasks\n * @copyright   coactum GmbH 2019\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function ($) {\n\n  var getTotalpoints = function () {\n    var totalpoints = 0;\n    var newval;\n\n    $(\".form-group input.form-control\").each(function () {\n      newval = parseFloat($(this).val());\n      if (newval) {\n        totalpoints += newval;\n      }\n    });\n\n    totalpoints = String(totalpoints.toFixed(2)).replace('.', ',');\n\n    return totalpoints;\n  };\n\n  var getTaskCount = function () {\n    var taskcount = 0;\n\n    $(\"form.mform .form-group input.form-control\").each(function () {\n      taskcount += 1;\n    });\n\n    return taskcount;\n  };\n\n  return {\n    init: function () {\n\n      // create input type number elements\n      $(\"form.mform input[type=text]\").attr(\"type\", \"number\");\n\n      var styles = {\n        \"-webkit-appearance\": \"textfield\",\n        \"-moz-appearance\": \"textfield\",\n        \"margin\": \"0px\",\n        \"width\": \"70px\"\n      };\n\n      $(\"form.mform input[type=number]\").css(styles);\n      $(\"form.mform input[type=number]\").attr(\"step\", \"0.01\");\n      $(\"form.mform input[type=number]\").attr(\"min\", \"0\");\n\n      $(\"form.mform .form-group\").on(\"change\", \"input\", function () { // update totalpoints if some field changes\n\n        var totalpoints = getTotalpoints();\n        $(\"#totalpoints\").text(totalpoints);\n      });\n    },\n    addtask: function () { //add new tasks\n\n      $(\"#id_add_task\").click(function () {\n\n        var taskcount = getTaskCount();\n        var newtaskcount = taskcount + 1;\n        var pointsofnewtask = 10;\n\n        if (taskcount <= 19) {\n\n          var temp = '<div class=\"form-group  fitem  \">';\n          temp += '<label class=\"col-form-label sr-only\" for=\"id_task_' + newtaskcount + '\"></label><span data-fieldtype=\"text\">';\n          temp += '<input class=\"form-control\" name=\"task[' + newtaskcount + ']\" id=\"id_task_' + newtaskcount + '\" value=\"';\n          temp += pointsofnewtask + '\" size=\"1\" type=\"number\" style=\"-webkit-appearance: textfield; -moz-appearance:textfield; ';\n          temp += 'margin: 0px; width: 70px;\" step=\"0.01\" min=\"0\"></span><div class=\"form-control-feedback\" id=\"id_error_task[';\n          temp += newtaskcount + ']\" style=\"display: none;\"></div></div> ';\n\n          $(\"div[data-groupname='tasknumbers_array'] .col-md-9 fieldset div.d-flex\").append('<span class=\"exammanagement_task_spacing\"><strong>' + newtaskcount + '</strong></span>');\n          $(\"div[data-groupname='tasks_array'] .col-md-9 fieldset div.d-flex\").append(temp);\n\n          var totalpoints = getTotalpoints();\n          $(\"#totalpoints\").text(totalpoints);\n\n          $(\"input[name=newtaskcount]\").val(parseInt($(\"input[name=newtaskcount]\").val()) + 1);\n        }\n\n      });\n    },\n    removetask: function () { //remove task\n\n      $(\"#id_remove_task\").click(function () {\n\n        var taskcount = getTaskCount();\n\n        if (taskcount > 1) {\n          $(\"div[data-groupname='tasknumbers_array'] .col-md-9 fieldset div.d-flex span:last\").remove();\n          $(\"div[data-groupname='tasks_array'] .col-md-9 fieldset div.d-flex .form-group:last\").remove();\n\n          var totalpoints = getTotalpoints();\n          $(\"#totalpoints\").text(totalpoints);\n\n          $(\"input[name=newtaskcount]\").val(parseInt($(\"input[name=newtaskcount]\").val() - 1));\n        }\n      });\n    }\n  };\n});\n"],"file":"configure_tasks.min.js"}