{"version":3,"sources":["../src/configure_tasks.js"],"names":["init","lang","attr","css","on","totalpoints","getTotalpoints","text","addtask","click","taskcount","getTaskCount","newtaskcount","temp","append","val","parseInt","removetask","remove","newval","each","parseFloat","toLocaleString"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tracking changes of input fields, adding and removing tasks and creating input type number fields\n *\n * @module      mod_exammanagement/configure_tasks\n * @copyright   2022 coactum GmbH\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nexport const init = (lang) => {\n  // Create input type number elements.\n  $(\"form.mform input[type=text]\").attr(\"type\", \"number\");\n\n  var styles = {\n    \"-webkit-appearance\": \"textfield\",\n    \"-moz-appearance\": \"textfield\",\n    \"margin\": \"0px\",\n    \"width\": \"70px\"\n  };\n\n  $(\"form.mform input[type=number]\").css(styles);\n  $(\"form.mform input[type=number]\").attr(\"step\", \"0.01\");\n  $(\"form.mform input[type=number]\").attr(\"min\", \"0.01\");\n  $(\"form.mform input[type=number]\").attr(\"max\", \"100\");\n\n  $(\"form.mform .form-group\").on(\"change\", \"input\", function () { // Update totalpoints if some field changes\n\n    var totalpoints = getTotalpoints(lang);\n    $(\"#totalpoints\").text(totalpoints);\n  });\n};\n\nexport const addtask = (lang) => { // Add new tasks.\n  $(\"#id_add_task\").click(function () {\n\n    var taskcount = getTaskCount();\n    var newtaskcount = taskcount + 1;\n    var pointsofnewtask = 10;\n\n    if (taskcount <= 44) {\n\n      var temp = '<div class=\"form-group  fitem  \">';\n      temp += '<label class=\"col-form-label sr-only\" for=\"id_task_' + newtaskcount + '\"></label><span data-fieldtype=\"text\">';\n      temp += '<input class=\"form-control\" name=\"task[' + newtaskcount + ']\" id=\"id_task_' + newtaskcount + '\" value=\"';\n      temp += pointsofnewtask + '\" size=\"1\" type=\"number\" style=\"-webkit-appearance: textfield; -moz-appearance:textfield; ';\n      temp += 'margin: 0px; width: 70px;\" step=\"0.01\" min=\"0\" max=\"100\"></span>';\n      temp += '<div class=\"form-control-feedback\" id=\"id_error_task[';\n      temp += newtaskcount + ']\" style=\"display: none;\"></div></div> ';\n\n      $(\"div[data-groupname='tasknumbers_array'] .col-md-9 fieldset div.d-flex\").append(\n        '<span class=\"exammanagement_task_spacing\"><strong>' + newtaskcount + '</strong></span>');\n      $(\"div[data-groupname='tasks_array'] .col-md-9 fieldset div.d-flex\").append(temp);\n\n      var totalpoints = getTotalpoints(lang);\n      $(\"#totalpoints\").text(totalpoints);\n\n      $(\"input[name=newtaskcount]\").val(parseInt($(\"input[name=newtaskcount]\").val()) + 1);\n    }\n\n  });\n};\n\nexport const removetask = (lang) => { // Remove task.\n  $(\"#id_remove_task\").click(function () {\n\n    var taskcount = getTaskCount();\n\n    if (taskcount > 1) {\n      $(\"div[data-groupname='tasknumbers_array'] .col-md-9 fieldset div.d-flex span:last\").remove();\n      $(\"div[data-groupname='tasks_array'] .col-md-9 fieldset div.d-flex .form-group:last\").remove();\n\n      var totalpoints = getTotalpoints(lang);\n      $(\"#totalpoints\").text(totalpoints);\n\n      $(\"input[name=newtaskcount]\").val(parseInt($(\"input[name=newtaskcount]\").val() - 1));\n    }\n  });\n};\n\nvar getTotalpoints = function (lang) {\n  var totalpoints = 0;\n  var newval;\n\n  $(\".form-group input.form-control\").each(function () {\n    newval = parseFloat($(this).val());\n    if (newval) {\n      totalpoints += newval;\n    }\n  });\n\n  totalpoints = totalpoints.toLocaleString(lang);\n\n  return totalpoints;\n};\n\nvar getTaskCount = function () {\n  var taskcount = 0;\n\n  $(\"form.mform .form-group input.form-control\").each(function () {\n    taskcount += 1;\n  });\n\n  return taskcount;\n};\n"],"file":"configure_tasks.min.js"}