{"version":3,"sources":["../src/configure_tasks.js"],"names":["init","lang","attr","css","removeClass","on","totalpoints","getTotalpoints","text","addtask","click","taskcount","getTaskCount","newtaskcount","temp","append","val","parseInt","removetask","remove","newval","each","parseFloat","toLocaleString"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tracking changes of input fields, adding and removing tasks and creating input type number fields.\n *\n * @module      mod_exammanagement/configure_tasks\n * @copyright   2022 coactum GmbH\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nexport const init = (lang) => {\n  // Create input type number elements.\n  $(\"form.mform input[type=text]\").attr(\"type\", \"number\");\n\n  var styles = {\n    \"-webkit-appearance\": \"textfield\",\n    \"-moz-appearance\": \"textfield\",\n    \"margin\": \"0px\"\n  };\n\n  $(\"form.mform input[type=number]\").css(styles);\n  $(\"form.mform input[type=number]\").attr(\"step\", \"0.1\");\n  $(\"form.mform input[type=number]\").attr(\"min\", \"0.1\");\n  $(\"form.mform input[type=number]\").attr(\"max\", \"100\");\n\n  // Remove cols from form layout.\n  $('.exammanagement_task_spacing .form-group div').removeClass('col-md-3');\n  $('.exammanagement_task_spacing .form-group div').removeClass('col-md-9');\n  $('.exammanagement_task_spacing .form-group').removeClass('row');\n\n  $(\"form.mform .form-group\").on(\"change\", \"input\", function () { // Update total points if some field changes\n\n    var totalpoints = getTotalpoints(lang);\n    $(\"#totalpoints\").text(totalpoints);\n  });\n};\n\nexport const addtask = (lang) => { // Add new tasks.\n  $(\"#id_add_task\").click(function () {\n\n    var taskcount = getTaskCount();\n    var newtaskcount = taskcount + 1;\n    var pointsofnewtask = 10;\n\n    if (taskcount <= 99) {\n\n      var temp = '<span class=\"exammanagement_task_spacing\">';\n      temp += '<strong>' + newtaskcount + '</strong><div id=\"fitem_id_task_1\" class=\"form-group fitem femptylabel\">';\n      temp += '<div class=\"col-form-label d-flex pb-0 pr-md-0\">';\n      temp += '<div class=\"ml-1 ml-md-auto d-flex align-items-center align-self-start\"></div></div>';\n      temp += '<div class=\"form-inline align-items-start felement\" data-fieldtype=\"text\">';\n      temp += '<input type=\"number\" class=\"form-control\" name=\"task[' + newtaskcount + ']\" id=\"id_task_' + newtaskcount + '\" ';\n      temp += 'value=\"' + pointsofnewtask + '\" style=\"appearance: textfield; margin: 0px;\" step=\"0.1\" min=\"0.1\" max=\"100\">';\n      temp += '<div class=\"form-control-feedback invalid-feedback\" id=\"id_error_task_' + newtaskcount + '\">';\n      temp += '</div></div></div></span>';\n\n      $(\".mform .tasksarea\").append(temp);\n\n      var totalpoints = getTotalpoints(lang);\n      $(\"#totalpoints\").text(totalpoints);\n\n      $(\"input[name=newtaskcount]\").val(parseInt($(\"input[name=newtaskcount]\").val()) + 1);\n    }\n\n  });\n};\n\nexport const removetask = (lang) => { // Remove task.\n  $(\"#id_remove_task\").click(function () {\n\n    var taskcount = getTaskCount();\n\n    if (taskcount > 1) {\n      $(\".mform .tasksarea span:last\").remove();\n\n      var totalpoints = getTotalpoints(lang);\n      $(\"#totalpoints\").text(totalpoints);\n\n      $(\"input[name=newtaskcount]\").val(parseInt($(\"input[name=newtaskcount]\").val() - 1));\n    }\n  });\n};\n\nvar getTotalpoints = function (lang) {\n  var totalpoints = 0;\n  var newval;\n\n  $(\".form-group input.form-control\").each(function () {\n    newval = parseFloat($(this).val());\n    if (newval) {\n      totalpoints += newval;\n    }\n  });\n\n  totalpoints = totalpoints.toLocaleString(lang);\n\n  return totalpoints;\n};\n\nvar getTaskCount = function () {\n  var taskcount = 0;\n\n  $(\"form.mform .exammanagement_task_spacing\").each(function () {\n    taskcount += 1;\n  });\n\n  return taskcount;\n};\n"],"file":"configure_tasks.min.js"}