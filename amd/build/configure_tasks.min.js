define("mod_exammanagement/configure_tasks",["exports","jquery"],(function(_exports,_jquery){var obj;
/**
   * Tracking changes of input fields, adding and removing tasks and creating input type number fields.
   *
   * @module      mod_exammanagement/configure_tasks
   * @copyright   2022 coactum GmbH
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.removetask=_exports.init=_exports.addtask=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};_exports.init=lang=>{(0,_jquery.default)("form.mform input[type=text]").attr("type","number");(0,_jquery.default)("form.mform input[type=number]").css({"-webkit-appearance":"textfield","-moz-appearance":"textfield",margin:"0px"}),(0,_jquery.default)("form.mform input[type=number]").attr("step","0.1"),(0,_jquery.default)("form.mform input[type=number]").attr("min","0.1"),(0,_jquery.default)("form.mform input[type=number]").attr("max","100"),(0,_jquery.default)(".exammanagement_task_spacing .form-group div").removeClass("col-md-3"),(0,_jquery.default)(".exammanagement_task_spacing .form-group div").removeClass("col-md-9"),(0,_jquery.default)(".exammanagement_task_spacing .form-group").removeClass("row"),(0,_jquery.default)("form.mform .form-group").on("change","input",(function(){var totalpoints=getTotalpoints(lang);(0,_jquery.default)("#totalpoints").text(totalpoints)}))};_exports.addtask=lang=>{(0,_jquery.default)("#id_add_task").click((function(){var taskcount=getTaskCount(),newtaskcount=taskcount+1;if(taskcount<=99){var temp='<span class="exammanagement_task_spacing">';temp+="<strong>"+newtaskcount+'</strong><div id="fitem_id_task_1" class="form-group fitem femptylabel">',temp+='<div class="col-form-label d-flex pb-0 pr-md-0">',temp+='<div class="ml-1 ml-md-auto d-flex align-items-center align-self-start"></div></div>',temp+='<div class="form-inline align-items-start felement" data-fieldtype="text">',temp+='<input type="number" class="form-control" name="task['+newtaskcount+']" id="id_task_'+newtaskcount+'" ',temp+='value="10" style="appearance: textfield; margin: 0px;" step="0.1" min="0.1" max="100">',temp+='<div class="form-control-feedback invalid-feedback" id="id_error_task_'+newtaskcount+'">',temp+="</div></div></div></span>",(0,_jquery.default)(".mform .tasksarea").append(temp);var totalpoints=getTotalpoints(lang);(0,_jquery.default)("#totalpoints").text(totalpoints),(0,_jquery.default)("input[name=newtaskcount]").val(parseInt((0,_jquery.default)("input[name=newtaskcount]").val())+1)}}))};_exports.removetask=lang=>{(0,_jquery.default)("#id_remove_task").click((function(){if(getTaskCount()>1){(0,_jquery.default)(".mform .tasksarea span:last").remove();var totalpoints=getTotalpoints(lang);(0,_jquery.default)("#totalpoints").text(totalpoints),(0,_jquery.default)("input[name=newtaskcount]").val(parseInt((0,_jquery.default)("input[name=newtaskcount]").val()-1))}}))};var getTotalpoints=function(lang){var newval,totalpoints=0;return(0,_jquery.default)(".form-group input.form-control").each((function(){(newval=parseFloat((0,_jquery.default)(this).val()))&&(totalpoints+=newval)})),totalpoints=totalpoints.toLocaleString(lang)},getTaskCount=function(){var taskcount=0;return(0,_jquery.default)("form.mform .exammanagement_task_spacing").each((function(){taskcount+=1})),taskcount}}));

//# sourceMappingURL=configure_tasks.min.js.map