{"version":3,"sources":["../src/import_bonus.js"],"names":["init","not","attr","css","hide","change","value","show","addbonusstep","click","bonusstepcount","getBonusstepCount","newbonusstepcount","temp","append","val","parseInt","removebonusstep","remove","each"],"mappings":"0LAuBA,uDAEO,GAAMA,CAAAA,CAAI,CAAG,UAAM,CAExB,cAAE,6BAAF,EAAiCC,GAAjC,CAAqC,8BAArC,EAAqEC,IAArE,CAA0E,MAA1E,CAAkF,QAAlF,EASA,cAAE,+BAAF,EAAmCC,GAAnC,CAPa,CACX,qBAAsB,WADX,CAEX,kBAAmB,WAFR,CAGX,OAAU,KAHC,CAIX,MAAS,MAJE,CAOb,EACA,cAAE,+BAAF,EAAmCD,IAAnC,CAAwC,MAAxC,CAAgD,MAAhD,EACA,cAAE,+BAAF,EAAmCA,IAAnC,CAAwC,KAAxC,CAA+C,GAA/C,EAEA,cAAE,0BAAF,EAA8BE,IAA9B,GAEA,cAAE,eAAF,EAAmBC,MAAnB,CAA0B,UAAY,CACpC,GAAkB,QAAd,OAAKC,KAAT,CAA4B,CAC1B,cAAE,iBAAF,EAAqBF,IAArB,GACA,cAAE,0BAAF,EAA8BG,IAA9B,EACD,CAHD,IAGO,IAAkB,OAAd,OAAKD,KAAT,CAA2B,CAChC,cAAE,iBAAF,EAAqBC,IAArB,GACA,cAAE,0BAAF,EAA8BH,IAA9B,EACD,CACF,CARD,CAUD,CA3BM,C,SA6BA,GAAMI,CAAAA,CAAY,CAAG,UAAM,CAEhC,cAAE,mBAAF,EAAuBC,KAAvB,CAA6B,UAAY,IAEnCC,CAAAA,CAAc,CAAGC,CAAiB,EAFC,CAGnCC,CAAiB,CAAGF,CAAc,CAAG,CAHF,CAMvC,GAAqB,CAAjB,CAAAA,CAAJ,CAAwB,CAEtB,GAAIG,CAAAA,CAAI,CAAG,kCAAX,CACAA,CAAI,EAAI,oEACJD,CADI,CACgB,2CADxB,CAEAC,CAAI,EAAI,wDACJD,CADI,CACgB,8BADhB,CAC+CA,CAD/C,CACmE,aAD3E,CAEAC,CAAI,EATqB,EASjB,CAAuB,kGAA/B,CACAA,CAAI,EAAI,6DAAR,CACAA,CAAI,EAAI,qEAAR,CACAA,CAAI,EAAID,CAAiB,CAAG,4CAA5B,CAEA,cAAE,6EAAF,EAAiFE,MAAjF,CACI,uDAAuDF,CAAvD,CAA2E,kBAD/E,EAEA,cAAE,4EAAF,EAAgFE,MAAhF,CAAuFD,CAAvF,EAEA,cAAE,4BAAF,EAAgCE,GAAhC,CAAoCC,QAAQ,CAAC,cAAE,4BAAF,EAAgCD,GAAhC,EAAD,CAAR,CAAkD,CAAtF,CACD,CAEF,CAzBD,CA0BD,CA5BM,C,iBA8BA,GAAME,CAAAA,CAAe,CAAG,UAAM,CAEnC,cAAE,sBAAF,EAA0BR,KAA1B,CAAgC,UAAY,CAE1C,GAAIC,CAAAA,CAAc,CAAGC,CAAiB,EAAtC,CAEA,GAAqB,CAAjB,CAAAD,CAAJ,CAAwB,CACtB,cAAE,uFAAF,EAA2FQ,MAA3F,GACA,cAAE,4FAAF,EAAgGA,MAAhG,GAEA,cAAE,4BAAF,EAAgCH,GAAhC,CAAoCC,QAAQ,CAAC,cAAE,4BAAF,EAAgCD,GAAhC,GAAwC,CAAzC,CAA5C,CACD,CACF,CAVD,CAWD,CAbM,C,oBAeP,GAAIJ,CAAAA,CAAiB,CAAG,UAAY,CAClC,GAAID,CAAAA,CAAc,CAAG,CAArB,CAEA,cAAE,2CAAF,EAA+CT,GAA/C,CAAmD,8BAAnD,EAAmFkB,IAAnF,CAAwF,UAAY,CAClGT,CAAc,EAAI,CACnB,CAFD,EAIA,MAAOA,CAAAA,CACR,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Adding and removing bonus steps and creating input type number fields.\n *\n * @module      mod_exammanagement/import_bonus\n * @copyright   2022 coactum GmbH\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nexport const init = () => {\n  // create input type number elements\n  $(\"form.mform input[type=text]\").not('#id_idfield, #id_pointsfield').attr(\"type\", \"number\");\n\n  var styles = {\n    \"-webkit-appearance\": \"textfield\",\n    \"-moz-appearance\": \"textfield\",\n    \"margin\": \"0px\",\n    \"width\": \"70px\"\n  };\n\n  $(\"form.mform input[type=number]\").css(styles);\n  $(\"form.mform input[type=number]\").attr(\"step\", \"0.01\");\n  $(\"form.mform input[type=number]\").attr(\"min\", \"0\");\n\n  $(\"#import_bonuspoints_text\").hide();\n\n  $('#id_bonusmode').change(function () {\n    if (this.value == 'points') {\n      $(\"#set_bonussteps\").hide();\n      $(\"#import_bonuspoints_text\").show();\n    } else if (this.value == 'steps') {\n      $(\"#set_bonussteps\").show();\n      $(\"#import_bonuspoints_text\").hide();\n    }\n  });\n\n};\n\nexport const addbonusstep = () => { // Add new step.\n\n  $(\"#id_add_bonusstep\").click(function () {\n\n    var bonusstepcount = getBonusstepCount();\n    var newbonusstepcount = bonusstepcount + 1;\n    var pointsofnewbonusstep = '';\n\n    if (bonusstepcount < 3) {\n\n      var temp = '<div class=\"form-group fitem\">';\n      temp += '<label class=\"col-form-label sr-only\" for=\"id_bonussteppoints_'\n        + newbonusstepcount + '\"></label><span data-fieldtype=\"text\">';\n      temp += '<input class=\"form-control\" name=\"bonussteppoints['\n        + newbonusstepcount + ']\" id=\"id_bonussteppoints_' + newbonusstepcount + '\" value=\"';\n      temp += pointsofnewbonusstep + '\" size=\"1\" type=\"number\" style=\"-webkit-appearance: textfield; -moz-appearance:textfield; ';\n      temp += 'margin: 0px; width: 70px;\" min=\"0\" step=\"0.01\"></span>';\n      temp += '<div class=\"form-control-feedback\" id=\"id_error_bonussteppoints[';\n      temp += newbonusstepcount + ']\" style=\"display: none;\"></div></div> ';\n\n      $(\"div[data-groupname='bonussstepnumbers_array'] .col-md-9 fieldset div.d-flex\").append(\n          '<span class=\"exammanagement_task_spacing\"><strong>' + newbonusstepcount + '</strong></span>');\n      $(\"div[data-groupname='bonussteppoints_array']  .col-md-9 fieldset div.d-flex\").append(temp);\n\n      $(\"input[name=bonusstepcount]\").val(parseInt($(\"input[name=bonusstepcount]\").val()) + 1);\n    }\n\n  });\n};\n\nexport const removebonusstep = () => { // Remove step.\n\n  $(\"#id_remove_bonusstep\").click(function () {\n\n    var bonusstepcount = getBonusstepCount();\n\n    if (bonusstepcount > 1) {\n      $(\"div[data-groupname='bonussstepnumbers_array'] .col-md-9 fieldset div.d-flex span:last\").remove();\n      $(\"div[data-groupname='bonussteppoints_array'] .col-md-9 fieldset div.d-flex .form-group:last\").remove();\n\n      $(\"input[name=bonusstepcount]\").val(parseInt($(\"input[name=bonusstepcount]\").val() - 1));\n    }\n  });\n};\n\nvar getBonusstepCount = function () {\n  var bonusstepcount = 0;\n\n  $(\"form.mform .form-group input.form-control\").not('#id_idfield, #id_pointsfield').each(function () {\n    bonusstepcount += 1;\n  });\n\n  return bonusstepcount;\n};\n"],"file":"import_bonus.min.js"}