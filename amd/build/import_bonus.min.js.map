{"version":3,"sources":["../src/import_bonus.js"],"names":["define","$","getBonusstepCount","bonusstepcount","not","each","init","attr","css","addbonusstep","click","newbonusstepcount","temp","append","val","parseInt","removebonusstep","remove"],"mappings":"AAuBAA,OAAM,mCAAC,CAAC,QAAD,CAAD,CAAa,SAAUC,CAAV,CAAa,CAE9B,GAAIC,CAAAA,CAAiB,CAAG,UAAY,CAClC,GAAIC,CAAAA,CAAc,CAAG,CAArB,CAEAF,CAAC,CAAC,gCAAD,CAAD,CAAoCG,GAApC,CAAwC,8BAAxC,EAAwEC,IAAxE,CAA6E,UAAY,CACvFF,CAAc,EAAI,CACnB,CAFD,EAIA,MAAOA,CAAAA,CACR,CARD,CAUA,MAAO,CACLG,IAAI,CAAE,eAAY,CAGhBL,CAAC,CAAC,kBAAD,CAAD,CAAsBG,GAAtB,CAA0B,8BAA1B,EAA0DG,IAA1D,CAA+D,MAA/D,CAAuE,QAAvE,EASAN,CAAC,CAAC,oBAAD,CAAD,CAAwBO,GAAxB,CAPa,CACX,qBAAsB,WADX,CAEX,kBAAmB,WAFR,CAGX,OAAU,KAHC,CAIX,MAAS,MAJE,CAOb,EACAP,CAAC,CAAC,oBAAD,CAAD,CAAwBM,IAAxB,CAA6B,MAA7B,CAAqC,MAArC,EACAN,CAAC,CAAC,oBAAD,CAAD,CAAwBM,IAAxB,CAA6B,KAA7B,CAAoC,GAApC,CACD,CAhBI,CAiBLE,YAAY,CAAE,uBAAY,CAExBR,CAAC,CAAC,mBAAD,CAAD,CAAuBS,KAAvB,CAA6B,UAAY,IAEnCP,CAAAA,CAAc,CAAGD,CAAiB,EAFC,CAGnCS,CAAiB,CAAGR,CAAc,CAAG,CAHF,CAMvC,GAAqB,CAAjB,CAAAA,CAAJ,CAAwB,CAEtB,GAAIS,CAAAA,CAAI,CAAG,qCAAX,CACAA,CAAI,EAAI,oEAAmED,CAAnE,CAAuF,2CAA/F,CACAC,CAAI,EAAI,wDAAuDD,CAAvD,CAA2E,8BAA3E,CAA0GA,CAA1G,CAA8H,aAAtI,CACAC,CAAI,EAPqB,EAOjB,CAAuB,kGAA/B,CACAA,CAAI,EAAI,gIAAR,CACAA,CAAI,EAAID,CAAiB,CAAG,4CAA5B,CAEAV,CAAC,CAAC,yDAAD,CAAD,CAA6DY,MAA7D,CAAoE,uDAAuDF,CAAvD,CAA2E,kBAA/I,EACAV,CAAC,CAAC,uDAAD,CAAD,CAA2DY,MAA3D,CAAkED,CAAlE,EAEAX,CAAC,CAAC,4BAAD,CAAD,CAAgCa,GAAhC,CAAoCC,QAAQ,CAACd,CAAC,CAAC,4BAAD,CAAD,CAAgCa,GAAhC,EAAD,CAAR,CAAkD,CAAtF,CACD,CAEF,CArBD,CAsBD,CAzCI,CA0CLE,eAAe,CAAE,0BAAY,CAE3Bf,CAAC,CAAC,sBAAD,CAAD,CAA0BS,KAA1B,CAAgC,UAAY,CAE1C,GAAIP,CAAAA,CAAc,CAAGD,CAAiB,EAAtC,CAEA,GAAqB,CAAjB,CAAAC,CAAJ,CAAwB,CACtBF,CAAC,CAAC,oEAAD,CAAD,CAAwEgB,MAAxE,GACAhB,CAAC,CAAC,wEAAD,CAAD,CAA4EgB,MAA5E,GAEAhB,CAAC,CAAC,4BAAD,CAAD,CAAgCa,GAAhC,CAAoCC,QAAQ,CAACd,CAAC,CAAC,4BAAD,CAAD,CAAgCa,GAAhC,GAAwC,CAAzC,CAA5C,CACD,CACF,CAVD,CAWD,CAvDI,CAyDR,CArEK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * functions for adding and removing bonus steps and creating input type number fields\n *\n * @module      mod_exammanagement/import_bonus\n * @copyright   coactum GmbH 2019\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function ($) {\n\n  var getBonusstepCount = function () {\n    var bonusstepcount = 0;\n\n    $(\".form-group input.form-control\").not('#id_idfield, #id_pointsfield').each(function () {\n      bonusstepcount += 1;\n    });\n\n    return bonusstepcount;\n  };\n\n  return {\n    init: function () {\n\n      // create input type number elements\n      $(\"input[type=text]\").not('#id_idfield, #id_pointsfield').attr(\"type\", \"number\");\n\n      var styles = {\n        \"-webkit-appearance\": \"textfield\",\n        \"-moz-appearance\": \"textfield\",\n        \"margin\": \"0px\",\n        \"width\": \"70px\"\n      };\n\n      $(\"input[type=number]\").css(styles);\n      $(\"input[type=number]\").attr(\"step\", \"0.01\");\n      $(\"input[type=number]\").attr(\"min\", \"0\");\n    },\n    addbonusstep: function () { //add new tasks\n\n      $(\"#id_add_bonusstep\").click(function () {\n\n        var bonusstepcount = getBonusstepCount();\n        var newbonusstepcount = bonusstepcount + 1;\n        var pointsofnewbonusstep = '';\n\n        if (bonusstepcount < 3) {\n\n          var temp = '<div class=\"form-group  fitem  \">';\n          temp += '<label class=\"col-form-label sr-only\" for=\"id_bonussteppoints_' + newbonusstepcount + '\"></label><span data-fieldtype=\"text\">';\n          temp += '<input class=\"form-control\" name=\"bonussteppoints[' + newbonusstepcount + ']\" id=\"id_bonussteppoints_' + newbonusstepcount + '\" value=\"';\n          temp += pointsofnewbonusstep + '\" size=\"1\" type=\"number\" style=\"-webkit-appearance: textfield; -moz-appearance:textfield; ';\n          temp += 'margin: 0px; width: 70px;\" min=\"0\" step=\"0.01\"></span><div class=\"form-control-feedback\" id=\"id_error_bonussteppoints[';\n          temp += newbonusstepcount + ']\" style=\"display: none;\"></div></div> ';\n\n          $(\"div[data-groupname='bonussstepnumbers_array'] .col-md-9\").append('<span class=\"exammanagement_task_spacing\"><strong>' + newbonusstepcount + '</strong></span>');\n          $(\"div[data-groupname='bonussteppoints_array'] .col-md-9\").append(temp);\n\n          $(\"input[name=bonusstepcount]\").val(parseInt($(\"input[name=bonusstepcount]\").val()) + 1);\n        }\n\n      });\n    },\n    removebonusstep: function () { //remove task\n\n      $(\"#id_remove_bonusstep\").click(function () {\n\n        var bonusstepcount = getBonusstepCount();\n\n        if (bonusstepcount > 1) {\n          $(\"div[data-groupname='bonussstepnumbers_array']  .col-md-9 span:last\").remove();\n          $(\"div[data-groupname='bonussteppoints_array'] .col-md-9 .form-group:last\").remove();\n\n          $(\"input[name=bonusstepcount]\").val(parseInt($(\"input[name=bonusstepcount]\").val() - 1));\n        }\n      });\n    }\n  };\n});\n"],"file":"import_bonus.min.js"}