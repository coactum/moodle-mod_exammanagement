{"version":3,"file":"import_bonus.min.js","sources":["../src/import_bonus.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Adding and removing bonus steps and creating input type number fields.\n *\n * @module      mod_exammanagement/import_bonus\n * @copyright   2022 coactum GmbH\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nexport const init = () => {\n  // Create input type number elements.\n  $(\"form.mform input[type=text]\").not('#id_idfield, #id_pointsfield').attr(\"type\", \"number\");\n\n  var styles = {\n    \"-webkit-appearance\": \"textfield\",\n    \"-moz-appearance\": \"textfield\",\n    \"margin\": \"0px\",\n    \"width\": \"70px\"\n  };\n\n  $(\"form.mform input[type=number]\").css(styles);\n  $(\"form.mform input[type=number]\").attr(\"step\", \"0.01\");\n  $(\"form.mform input[type=number]\").attr(\"min\", \"0\");\n\n  $(\"#import_bonuspoints_text\").hide();\n\n  $('#id_bonusmode').change(function() {\n    if (this.value == 'points') {\n      $(\"#set_bonussteps\").hide();\n      $(\"#import_bonuspoints_text\").show();\n    } else if (this.value == 'steps') {\n      $(\"#set_bonussteps\").show();\n      $(\"#import_bonuspoints_text\").hide();\n    }\n  });\n\n};\n\nexport const addbonusstep = () => { // Add new step.\n\n  $(\"#id_add_bonusstep\").click(function() {\n\n    var bonusstepcount = getBonusstepCount();\n    var newbonusstepcount = bonusstepcount + 1;\n    var pointsofnewbonusstep = '';\n\n    if (bonusstepcount < 3) {\n\n      var temp = '<div class=\"form-group fitem\">';\n      temp += '<label class=\"col-form-label sr-only\" for=\"id_bonussteppoints_'\n        + newbonusstepcount + '\"></label><span data-fieldtype=\"text\">';\n      temp += '<input class=\"form-control\" name=\"bonussteppoints['\n        + newbonusstepcount + ']\" id=\"id_bonussteppoints_' + newbonusstepcount + '\" value=\"';\n      temp += pointsofnewbonusstep + '\" size=\"1\" type=\"number\" style=\"-webkit-appearance: textfield; -moz-appearance:textfield; ';\n      temp += 'margin: 0px; width: 70px;\" min=\"0\" step=\"0.01\"></span>';\n      temp += '<div class=\"form-control-feedback\" id=\"id_error_bonussteppoints[';\n      temp += newbonusstepcount + ']\" style=\"display: none;\"></div></div> ';\n\n      $(\"div[data-groupname='bonussstepnumbers_array'] .col-md-9 fieldset div.d-flex\").append(\n          '<span class=\"exammanagement_task_spacing\"><strong>' + newbonusstepcount + '</strong></span>');\n      $(\"div[data-groupname='bonussteppoints_array']  .col-md-9 fieldset div.d-flex\").append(temp);\n\n      $(\"input[name=bonusstepcount]\").val(parseInt($(\"input[name=bonusstepcount]\").val()) + 1);\n    }\n\n  });\n};\n\nexport const removebonusstep = () => { // Remove step.\n\n  $(\"#id_remove_bonusstep\").click(function() {\n\n    var bonusstepcount = getBonusstepCount();\n\n    if (bonusstepcount > 1) {\n      $(\"div[data-groupname='bonussstepnumbers_array'] .col-md-9 fieldset div.d-flex span:last\").remove();\n      $(\"div[data-groupname='bonussteppoints_array'] .col-md-9 fieldset div.d-flex .form-group:last\").remove();\n\n      $(\"input[name=bonusstepcount]\").val(parseInt($(\"input[name=bonusstepcount]\").val() - 1));\n    }\n  });\n};\n\nvar getBonusstepCount = function() {\n  var bonusstepcount = 0;\n\n  $(\"form.mform .form-group input.form-control\").not('#id_idfield, #id_pointsfield').each(function() {\n    bonusstepcount += 1;\n  });\n\n  return bonusstepcount;\n};\n"],"names":["obj","_jquery","__esModule","default","_exports","init","$","not","attr","css","margin","width","hide","change","this","value","show","addbonusstep","click","bonusstepcount","getBonusstepCount","newbonusstepcount","temp","append","val","parseInt","removebonusstep","remove","each"],"mappings":"0FAuBuB,IAAAA;;;;;;;iIAAvBC,SAAuBD,IAAvBC,UAAuBD,IAAAE,WAAAF,IAAAG,CAAAA,QAAAH,KA6BrBI,SAAAC,KA3BkBA,MAElB,EAAAC,QAACH,SAAC,+BAA+BI,IAAI,gCAAgCC,KAAK,OAAQ,WASlF,EAAAF,QAAAA,SAAE,iCAAiCG,IAPtB,CACX,qBAAsB,YACtB,kBAAmB,YACnBC,OAAU,MACVC,MAAS,UAIX,EAAAL,QAAAA,SAAE,iCAAiCE,KAAK,OAAQ,SAChD,EAAAF,QAAAA,SAAE,iCAAiCE,KAAK,MAAO,MAE/C,EAAAF,iBAAE,4BAA4BM,QAE9B,EAAAN,iBAAE,iBAAiBO,QAAO,WACN,UAAdC,KAAKC,QACP,EAAAT,iBAAE,mBAAmBM,QACrB,EAAAN,iBAAE,4BAA4BU,QACP,SAAdF,KAAKC,SACd,EAAAT,iBAAE,mBAAmBU,QACrB,EAAAV,iBAAE,4BAA4BM,OAElC,GAAE,EAgCFR,SAAAa,aA5B0BA,MAE1B,EAAAX,iBAAE,qBAAqBY,OAAM,WAE3B,IAAIC,eAAiBC,oBACjBC,kBAAoBF,eAAiB,EAGzC,GAAIA,eAAiB,EAAG,CAEtB,IAAIG,KAAO,iCACXA,MAAQ,iEACJD,kBAAoB,yCACxBC,MAAQ,qDACJD,kBAAoB,6BAA+BA,kBAAoB,YAC3EC,MAA+B,6FAC/BA,MAAQ,yDACRA,MAAQ,mEACRA,MAAQD,kBAAoB,2CAE5B,EAAAf,QAACH,SAAC,+EAA+EoB,OAC7E,qDAAuDF,kBAAoB,qBAC/E,EAAAf,QAAAA,SAAE,8EAA8EiB,OAAOD,OAEvF,EAAAhB,QAAAA,SAAE,8BAA8BkB,IAAIC,UAAS,EAAAnB,iBAAE,8BAA8BkB,OAAS,EACxF,CAEF,GAAE,EAgBFpB,SAAAsB,gBAb6BA,MAE7B,EAAApB,iBAAE,wBAAwBY,OAAM,WAETE,oBAEA,KACnB,EAAAd,iBAAE,yFAAyFqB,UAC3F,EAAArB,iBAAE,8FAA8FqB,UAEhG,EAAArB,QAAAA,SAAE,8BAA8BkB,IAAIC,UAAS,EAAAnB,iBAAE,8BAA8BkB,MAAQ,IAEzF,GAAE,EAGJ,IAAIJ,kBAAoB,WACtB,IAAID,eAAiB,EAMrB,OAJA,EAAAb,QAACH,SAAC,6CAA6CI,IAAI,gCAAgCqB,MAAK,WACtFT,gBAAkB,CACpB,IAEOA,eACP"}