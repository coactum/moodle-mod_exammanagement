{"version":3,"sources":["../src/import_bonus.js"],"names":["define","$","getBonusstepCount","bonusstepcount","not","each","init","attr","css","hide","change","value","show","addbonusstep","click","newbonusstepcount","temp","append","val","parseInt","removebonusstep","remove"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * functions for adding and removing bonus steps and creating input type number fields\n *\n * @module      mod_exammanagement/import_bonus\n * @copyright   2022 coactum GmbH\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function ($) {\n\n  var getBonusstepCount = function () {\n    var bonusstepcount = 0;\n\n    $(\"form.mform .form-group input.form-control\").not('#id_idfield, #id_pointsfield').each(function () {\n      bonusstepcount += 1;\n    });\n\n    return bonusstepcount;\n  };\n\n  return {\n    init: function () {\n\n      // create input type number elements\n      $(\"form.mform input[type=text]\").not('#id_idfield, #id_pointsfield').attr(\"type\", \"number\");\n\n      var styles = {\n        \"-webkit-appearance\": \"textfield\",\n        \"-moz-appearance\": \"textfield\",\n        \"margin\": \"0px\",\n        \"width\": \"70px\"\n      };\n\n      $(\"form.mform input[type=number]\").css(styles);\n      $(\"form.mform input[type=number]\").attr(\"step\", \"0.01\");\n      $(\"form.mform input[type=number]\").attr(\"min\", \"0\");\n\n      $(\"#import_bonuspoints_text\").hide();\n\n      $('#id_bonusmode').change(function(){\n        if (this.value == 'points'){\n          $(\"#set_bonussteps\").hide();\n          $(\"#import_bonuspoints_text\").show();\n        } else if(this.value == 'steps'){\n          $(\"#set_bonussteps\").show();\n          $(\"#import_bonuspoints_text\").hide();\n        }\n      });\n\n    },\n    addbonusstep: function () { //add new tasks\n\n      $(\"#id_add_bonusstep\").click(function () {\n\n        var bonusstepcount = getBonusstepCount();\n        var newbonusstepcount = bonusstepcount + 1;\n        var pointsofnewbonusstep = '';\n\n        if (bonusstepcount < 3) {\n\n          var temp = '<div class=\"form-group fitem\">';\n          temp += '<label class=\"col-form-label sr-only\" for=\"id_bonussteppoints_' + newbonusstepcount + '\"></label><span data-fieldtype=\"text\">';\n          temp += '<input class=\"form-control\" name=\"bonussteppoints[' + newbonusstepcount + ']\" id=\"id_bonussteppoints_' + newbonusstepcount + '\" value=\"';\n          temp += pointsofnewbonusstep + '\" size=\"1\" type=\"number\" style=\"-webkit-appearance: textfield; -moz-appearance:textfield; ';\n          temp += 'margin: 0px; width: 70px;\" min=\"0\" step=\"0.01\"></span><div class=\"form-control-feedback\" id=\"id_error_bonussteppoints[';\n          temp += newbonusstepcount + ']\" style=\"display: none;\"></div></div> ';\n\n          $(\"div[data-groupname='bonussstepnumbers_array'] .col-md-9 fieldset div.d-flex\").append('<span class=\"exammanagement_task_spacing\"><strong>' + newbonusstepcount + '</strong></span>');\n          $(\"div[data-groupname='bonussteppoints_array']  .col-md-9 fieldset div.d-flex\").append(temp);\n\n          $(\"input[name=bonusstepcount]\").val(parseInt($(\"input[name=bonusstepcount]\").val()) + 1);\n        }\n\n      });\n    },\n    removebonusstep: function () { //remove task\n\n      $(\"#id_remove_bonusstep\").click(function () {\n\n        var bonusstepcount = getBonusstepCount();\n\n        if (bonusstepcount > 1) {\n          $(\"div[data-groupname='bonussstepnumbers_array'] .col-md-9 fieldset div.d-flex span:last\").remove();\n          $(\"div[data-groupname='bonussteppoints_array'] .col-md-9 fieldset div.d-flex .form-group:last\").remove();\n\n          $(\"input[name=bonusstepcount]\").val(parseInt($(\"input[name=bonusstepcount]\").val() - 1));\n        }\n      });\n    }\n  };\n});\n"],"file":"import_bonus.min.js"}