{"version":3,"file":"assign_places.min.js","sources":["../src/assign_places.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Toggle available places pattern and removes unneccesary cols.\n *\n * @module      mod_exammanagement/assign_places\n * @copyright   2022 coactum GmbH\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nexport const init = () => {\n    // Remove cols from form layout.\n    $('.exammanagement_table .form-group div').removeClass('col-md-3');\n    $('.exammanagement_table .form-group div').removeClass('col-md-9');\n};\n\nexport const toggleAvailablePlaces = () => {\n    $(\"form.mform .fitem\").on(\"change\", \"select\", function() { // Change available places pattern if other room is choosen.\n        var selectedPlacesId = $(this).children(\":selected\").attr(\"value\");\n        var participantId = $(this).attr(\"id\").split('_')[2];\n\n        // Hide all placespatterns for participant.\n        $(\"#available_places_\" + participantId + \" .hideablepattern\").each(function() {\n          $(this).hide(); // Hide old places pattern.\n        });\n\n        var posPoint = selectedPlacesId.indexOf('.'); // Make room ids with . working.\n\n        if (posPoint !== -1) {\n          selectedPlacesId = selectedPlacesId.substr(0, posPoint) + '\\\\' + selectedPlacesId.substr(posPoint);\n        }\n\n        // Show all placespatterns for participant.\n        $('#available_places_' + participantId + ' #' + selectedPlacesId).show(); // Make correct pattern for places visible.\n\n        // Reset places.\n        $('#id_places_' + participantId).val('');\n\n        // Change focus to places field.\n        $('#id_places_' + participantId).focus();\n\n      });\n\n};\n"],"names":["obj","_jquery","__esModule","default","_exports","init","$","removeClass","toggleAvailablePlaces","on","selectedPlacesId","this","children","attr","participantId","split","each","hide","posPoint","indexOf","substr","show","val","focus"],"mappings":"2FAuBuB,IAAAA;;;;;;;iHAAvBC,SAAuBD,IAAvBC,UAAuBD,IAAAE,WAAAF,IAAAG,CAAAA,QAAAH,KAMrBI,SAAAC,KAJkBA,MAEhB,EAAAC,QAAAA,SAAE,yCAAyCC,YAAY,aACvD,EAAAD,QAAAA,SAAE,yCAAyCC,YAAY,WAAW,EA8BpEH,SAAAI,sBA3BmCA,MACjC,EAAAF,QAAAA,SAAE,qBAAqBG,GAAG,SAAU,UAAU,WAC1C,IAAIC,kBAAmB,EAAAJ,QAACH,SAACQ,MAAMC,SAAS,aAAaC,KAAK,SACtDC,eAAgB,EAAAR,iBAAEK,MAAME,KAAK,MAAME,MAAM,KAAK,IAGlD,EAAAT,QAAAA,SAAE,qBAAuBQ,cAAgB,qBAAqBE,MAAK,YACjE,EAAAV,iBAAEK,MAAMM,MACV,IAEA,IAAIC,SAAWR,iBAAiBS,QAAQ,MAEtB,IAAdD,WACFR,iBAAmBA,iBAAiBU,OAAO,EAAGF,UAAY,KAAOR,iBAAiBU,OAAOF,YAI3F,EAAAZ,QAACH,SAAC,qBAAuBW,cAAgB,KAAOJ,kBAAkBW,QAGlE,EAAAf,QAAAA,SAAE,cAAgBQ,eAAeQ,IAAI,KAGrC,EAAAhB,QAAAA,SAAE,cAAgBQ,eAAeS,OAEnC,GAAE,CAEN"}