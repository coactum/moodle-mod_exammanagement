{"version":3,"sources":["../src/assign_places.js"],"names":["define","$","init","removeClass","toggleAvailablePlaces","on","selectedPlacesId","children","attr","participantId","split","each","hide","posPoint","indexOf","substr","show","val","focus"],"mappings":"AAuBAA,OAAM,oCAAC,CAAC,QAAD,CAAD,CAAa,SAAUC,CAAV,CAAa,CAE9B,MAAO,CACLC,IAAI,CAAE,eAAU,CAEdD,CAAC,CAAC,uCAAD,CAAD,CAA2CE,WAA3C,CAAuD,UAAvD,EACAF,CAAC,CAAC,uCAAD,CAAD,CAA2CE,WAA3C,CAAuD,UAAvD,CACD,CALI,CAOLC,qBAAqB,CAAE,gCAAU,CAE/BH,CAAC,CAAC,mBAAD,CAAD,CAAuBI,EAAvB,CAA0B,QAA1B,CAAoC,QAApC,CAA8C,UAAY,IACpDC,CAAAA,CAAgB,CAAGL,CAAC,CAAC,IAAD,CAAD,CAAQM,QAAR,CAAiB,WAAjB,EAA8BC,IAA9B,CAAmC,OAAnC,CADiC,CAEpDC,CAAa,CAAGR,CAAC,CAAC,IAAD,CAAD,CAAQO,IAAR,CAAa,IAAb,EAAmBE,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAFoC,CAKxDT,CAAC,CAAC,qBAAuBQ,CAAvB,CAAuC,mBAAxC,CAAD,CAA8DE,IAA9D,CAAmE,UAAY,CAC7EV,CAAC,CAAC,IAAD,CAAD,CAAQW,IAAR,EACD,CAFD,EAIA,GAAIC,CAAAA,CAAQ,CAAGP,CAAgB,CAACQ,OAAjB,CAAyB,GAAzB,CAAf,CAEA,GAAiB,CAAC,CAAd,GAAAD,CAAJ,CAAqB,CACnBP,CAAgB,CAAGA,CAAgB,CAACS,MAAjB,CAAwB,CAAxB,CAA2BF,CAA3B,EAAuC,IAAvC,CAA8CP,CAAgB,CAACS,MAAjB,CAAwBF,CAAxB,CAClE,CAGDZ,CAAC,CAAC,qBAAuBQ,CAAvB,CAAuC,IAAvC,CAA8CH,CAA/C,CAAD,CAAkEU,IAAlE,GAGAf,CAAC,CAAC,cAAgBQ,CAAjB,CAAD,CAAiCQ,GAAjC,CAAqC,EAArC,EAGAhB,CAAC,CAAC,cAAgBQ,CAAjB,CAAD,CAAiCS,KAAjC,EAED,CAxBD,CA0BD,CAnCI,CAqCR,CAvCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Saving assign places form and fetching table fragment via ajax.\n *\n * @module      mod_exammanagement/assign_places\n * @copyright   2022 coactum GmbH\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function ($) {\n\n  return {\n    init: function(){\n      // remove cols from form layout\n      $('.exammanagement_table .form-group div').removeClass('col-md-3');\n      $('.exammanagement_table .form-group div').removeClass('col-md-9');\n    },\n\n    toggleAvailablePlaces: function(){\n\n      $(\"form.mform .fitem\").on(\"change\", \"select\", function () { // change available places pattern if other room is choosen\n        var selectedPlacesId = $(this).children(\":selected\").attr(\"value\");\n        var participantId = $(this).attr(\"id\").split('_')[2];\n\n        // hide all placespatterns for participant\n        $(\"#available_places_\" + participantId + \" .hideablepattern\").each(function () {\n          $(this).hide(); // hide old places pattern\n        });\n\n        var posPoint = selectedPlacesId.indexOf('.'); // make room ids with . working\n\n        if (posPoint !== -1) {\n          selectedPlacesId = selectedPlacesId.substr(0, posPoint) + '\\\\' + selectedPlacesId.substr(posPoint);\n        }\n\n        // show all placespatterns for participant\n        $('#available_places_' + participantId + ' #' + selectedPlacesId).show(); // make correct pattern for places visible\n\n        // reset places\n        $('#id_places_' + participantId).val('');\n\n        // change focus to places field\n        $('#id_places_' + participantId).focus();\n\n      });\n\n    }\n  };\n});\n"],"file":"assign_places.min.js"}