{"version":3,"file":"assign_places.min.js","sources":["../src/assign_places.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Toggle available places pattern.\n *\n * @module      mod_exammanagement/assign_places\n * @copyright   2022 coactum GmbH\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nexport const init = () => {\n    // remove cols from form layout\n    $('.exammanagement_table .form-group div').removeClass('col-md-3');\n    $('.exammanagement_table .form-group div').removeClass('col-md-9');\n};\n\nexport const toggleAvailablePlaces = () => {\n    $(\"form.mform .fitem\").on(\"change\", \"select\", function () { // change available places pattern if other room is choosen\n        var selectedPlacesId = $(this).children(\":selected\").attr(\"value\");\n        var participantId = $(this).attr(\"id\").split('_')[2];\n\n        // hide all placespatterns for participant\n        $(\"#available_places_\" + participantId + \" .hideablepattern\").each(function () {\n          $(this).hide(); // hide old places pattern\n        });\n\n        var posPoint = selectedPlacesId.indexOf('.'); // make room ids with . working\n\n        if (posPoint !== -1) {\n          selectedPlacesId = selectedPlacesId.substr(0, posPoint) + '\\\\' + selectedPlacesId.substr(posPoint);\n        }\n\n        // show all placespatterns for participant\n        $('#available_places_' + participantId + ' #' + selectedPlacesId).show(); // make correct pattern for places visible\n\n        // reset places\n        $('#id_places_' + participantId).val('');\n\n        // change focus to places field\n        $('#id_places_' + participantId).focus();\n\n      });\n\n};\n"],"names":["removeClass","on","selectedPlacesId","this","children","attr","participantId","split","each","hide","posPoint","indexOf","substr","show","val","focus"],"mappings":";;;;;;;uLAyBoB,yBAEd,yCAAyCA,YAAY,gCACrD,yCAAyCA,YAAY,4CAGtB,yBAC/B,qBAAqBC,GAAG,SAAU,UAAU,eACtCC,kBAAmB,mBAAEC,MAAMC,SAAS,aAAaC,KAAK,SACtDC,eAAgB,mBAAEH,MAAME,KAAK,MAAME,MAAM,KAAK,uBAGhD,qBAAuBD,cAAgB,qBAAqBE,MAAK,+BAC/DL,MAAMM,cAGNC,SAAWR,iBAAiBS,QAAQ,MAEtB,IAAdD,WACFR,iBAAmBA,iBAAiBU,OAAO,EAAGF,UAAY,KAAOR,iBAAiBU,OAAOF,+BAIzF,qBAAuBJ,cAAgB,KAAOJ,kBAAkBW,2BAGhE,cAAgBP,eAAeQ,IAAI,wBAGnC,cAAgBR,eAAeS"}