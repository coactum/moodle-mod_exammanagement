{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template exammanagement/exammanagement_overview

    Example context (json):
    {
        "comment": "Example comment for the context"
    }
}}

{{#js}}

showMore = function() {

			helptextboxcontent = jQuery.find('.helptextboxcontent');
			helptextboxcontentheight = jQuery(helptextboxcontent).outerHeight();

			helptextbox = jQuery.find('.helptextbox');
			jQuery(helptextbox).css({
			      "height": jQuery(helptextbox).height(),
			      "max-height": 9999
			    })
			    .animate({
			      "height": helptextboxcontentheight
			    });


			readMore = jQuery.find('.read-more');
			jQuery(readMore).fadeOut();
			return false;	    
		};

ajaxtoogle = function(command, value){
    console.log(command, value);

    if(command=='room'){
        jQuery.ajax ({
            url: './view.php',
            data: {'id': {{cmid}},'calledfromformrp': true, 'roomplacevisible': Number(!value)},
            success: function(response) {
            },
            error: function(response) {
              alert('Fehler beim Speichern.')
            }
        });
    } else if(command=='datetime'){
        jQuery.ajax ({
            url: './view.php',
            data: {'id': {{cmid}},'calledfromformdt': true, 'datetimevisible': Number(!value)},
            success: function(response) {
            },
            error: function(response) {
              alert('Fehler beim Speichern.')
            }
        });
    }
}

{{/js}}

   <div class="container-fluid">
      <div class="alert alert-info alert-dismissible fade in" role="alert">
          <div class="helptextbox">
    		      <div class="helptextboxcontent">
                  <div class="row">
                      <h4 class="alert-heading col-xs-11">{{#str}}helptext_str, mod_exammanagement{{/str}}</h4>
                      <button type="button" class="close col-xs-1" data-dismiss="alert" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                      </button>
                  </div>
                  <p>{{#str}}helptext_overview, mod_exammanagement{{/str}}</p>
                  <hr>
                  <p class="mb-0">{{#str}}helptext_link, mod_exammanagement{{/str}} <a href="https://hilfe.uni-paderborn.de/PANDA" class="alert-link" target="_blank">https://hilfe.uni-paderborn.de/PANDA</a></p>
                  <p class="read-more"><a href="#" onclick="return showMore()" class="button">Mehr lesen</a></p>
              </div>
          </div>
      </div>

      <h4 class="m-y-1">{{#str}}overview, mod_exammanagement{{/str}}</h4>

      <ul class="exmammanagement-summary list-unstyled">
          {{!before_exam}}
          <li class="item" id="beforeexam">
            {{#firstphasecompleted}}<i class="fa fa-check text-success" aria-hidden="true"></i>{{/firstphasecompleted}}
            {{^firstphasecompleted}}<i class="fa fa-fw" aria-hidden="true"></i>{{/firstphasecompleted}}
            <div class="card">
              <div class="card-block">
                <div class="row">
                  <h4 class="card-title col-xs-11">Vor der Prüfung</h4>
                  <a type="button" class="close col-xs-1" data-toggle="collapse" data-target=".phase_one" aria-expanded="false" aria-controls="phase_one">
                      <span data-toggle="tooltip" title="Phase öffnen / schließen" aria-label="Maximieren und Minimieren"><i class="fa fa-caret-down" aria-hidden="true"></i></span>
                  </a>
                </div>
                {{#firstphasecompleted}}<div class="collapse phase_one">{{/firstphasecompleted}}
                {{^firstphasecompleted}}<div class="collapse.show phase_one">{{/firstphasecompleted}}
                    <div class="card-text">
                      <div class="row row-eq-height">
                          <div class="card col-md-6">
                            <div class="card-body">
                              <div class="card-header m-b-1">
                                <i class="fa fa-building-o" aria-hidden="true"></i> <a href="chooseRooms.php?id={{cmid}}">Räume auswählen</a>
                              </div>
                              <div class="card-text">
                                {{#rooms}}<p><i class="fa fa-lg fa-check-circle text-success" aria-hidden="true"></i> Räume: {{rooms}} <i class="fa fa-building-o" aria-hidden="true"></i></p>{{/rooms}}
                                {{^rooms}}<p><i class="fa fa-lg fa-exclamation-triangle text-warning"></i> Es wurden noch keine Räume für die Prüfung ausgewählt.</p>{{/rooms}}
                              </div>
                            </div>
                          </div>
                          <div class="card col-md-6">
                            <div class="card-body">
                              <div class="card-header m-b-1">
                                <i class="fa fa-calendar" aria-hidden="true"></i> <a href="set_date_time.php?id={{cmid}}">Datum und Zeit festlegen</a>
                              </div>
                              <div class="card-text m-l-1">
                                {{#hrexamtime}}<p><i class="fa fa-lg fa-check-circle text-success" aria-hidden="true"></i> <i class="fa fa-calendar" aria-hidden="true"></i> {{hrexamtime}} <i class="fa fa-clock-o" aria-hidden="true"></i></p>{{/hrexamtime}}
                                {{^hrexamtime}}<p><i class="fa fa-lg fa-exclamation-triangle text-warning"></i> Es wurden noch kein Datum und keine Uhrzeit für die Prüfung festgelegt.</p>{{/hrexamtime}}
                              </div>
                            </div>
                          </div>
                      </div>
                      <div class="row row-eq-height">
                          <div class="card col-md-6">
                            <div class="card-body">
                              <div class="card-header m-b-1">
                                <i class="fa fa-users" aria-hidden="true"></i> <a href="addParticipants.php?id={{cmid}}">Teilnehmer hinzufügen</a>
                              </div>
                              <div class="card-text">
                                {{#participants}}<p><i class="fa fa-lg fa-check-circle text-success" aria-hidden="true"></i> Prüfungsteilnehmer: {{participants}} <i class="fa fa-users" aria-hidden="true"></i></p>{{/participants}}
                                {{^participants}}<p><i class="fa fa-lg fa-exclamation-triangle text-warning"></i> Es wurden noch keine Teilnehmer zur Prüfung hinzugefügt.</p>{{/participants}}
                              </div>
                            </div>
                          </div>
                          <div class="card col-md-6">
                            <div class="card-body">
                              <div class="card-header m-b-1">
                                <i class="fa fa-tasks" aria-hidden="true"></i> <a>Aufgaben konfigurieren</a> <i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                              </div>
                              <div class="card-text">
                                <p><i class="fa fa-lg fa-exclamation-triangle text-warning"></i> Es wurden noch keine Aufgaben konfiguriert.</p>
                              </div>
                            </div>
                          </div>
                      </div>
                      <div class="row row-eq-height">
                          <div class="card col-md-6">
                            <div class="card-body">
                              <div class="card-header m-b-1">
                                <i class="fa fa-align-justify" aria-hidden="true"></i> <a href="textfield.php?id={{cmid}}">Freitextfeld bearbeiten (optional)</a>
                              </div>
                              <div class="card-text">
                                {{#textfield}}<p><i class="fa fa-lg fa-check-circle text-success" aria-hidden="true"></i> {{textfield}}</p>{{/textfield}}
                                {{^textfield}}<p><i class="fa fa-lg fa-exclamation-triangle text-warning"></i> Es wurde noch kein Inhalt für das Textfeld eingetragen.</p>{{/textfield}}
                              </div>
                            </div>
                          </div>
                          <div class="card col-md-6">
                            <div class="card-body">
                              <div class="card-header m-b-1">
                                <i class="fa fa-envelope" aria-hidden="true"></i> <a href="groupmessages.php?id={{cmid}}">Nachricht an Teilnehmer schreiben (optional)</a>
                              </div>
                              <div class="card-text">
                                <p>Hier können Nachrichten (PANDA Mitteilungen) an alle zur Prüfung hinzugefügten Teilnehmer versendet werden.</p>
                              </div>
                            </div>
                          </div>
                      </div>
                    </div>
                </div>
              </div>
            </div>
          </li>
          {{!for_exam}}
          <li class="item" id="forexam">
            {{#secondphasecompleted}}<i class="fa fa-check text-success" aria-hidden="true"></i>{{/secondphasecompleted}}
            {{^secondphasecompleted}}<i class="fa fa-fw" aria-hidden="true"></i>{{/secondphasecompleted}}
            <div class="card">
              <div class="card-block">
                <div class="row">
                  <h4 class="card-title col-xs-11">Für die Prüfung</h4>
                  <a type="button" class="close col-xs-1" data-toggle="collapse" data-target=".phase_two" aria-expanded="false" aria-controls="phase_two">
                      <span data-toggle="tooltip" title="Phase öffnen / schließen" aria-label="Maximieren und Minimieren"><i class="fa fa-caret-down" aria-hidden="true"></i></span>
                  </a>
                </div>
                {{#secondphasecompleted}}<div class="collapse phase_two">{{/secondphasecompleted}}
                {{#firstphasecompleted}}{{^secondphasecompleted}}<div class="collapse.show phase_two">{{/secondphasecompleted}}{{/firstphasecompleted}}
                {{^firstphasecompleted}}{{^secondphasecompleted}}<div class="collapse phase_two">{{/secondphasecompleted}}{{/firstphasecompleted}}
                    <div class="card-text">
                    <div class="row row-eq-height">
                        <div class="card col-md-6">
                          <div class="card-body">
                            <div class="card-header m-b-1">
                              <i class="fa fa-refresh" aria-hidden="true"></i> <a href="assignPlaces.php?id={{cmid}}">Sitzplätze automatisch zuweisen</a>
                            </div>
                            <div class="card-text">
                              {{#stateofplacescorrect}}<p><i class="fa fa-lg fa-check-circle text-success" aria-hidden="true"></i> Die Sitzplätze wurden erfolgreich zugewiesen.</p>{{/stateofplacescorrect}}
                              {{#stateofplaceserror}}<p><i class="fa fa-lg fa-exclamation-triangle text-warning"></i> Bei der letzten Sitzplatzzuweisung ist ein Fehler aufgetreten. Bitte Vorgang wiederholen.</p>{{/stateofplaceserror}}
                              {{^stateofplacescorrect}}{{^stateofplaceserror}}<p><i class="fa fa-lg fa-exclamation-triangle text-warning"></i> Es wurden noch keine Sitzplätze zugewiesen.</p>{{/stateofplaceserror}}{{/stateofplacescorrect}}
                            </div>
                          </div>
                        </div>
                        <div class="card col-md-6">
                          <div class="card-body">
                            <div class="card-header m-b-1">
                              <i class="fa fa-file-pdf-o" aria-hidden="true"></i> <a>Sitzplan exportieren (optional)</a> <i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                            </div>
                            <div class="card-text">
                              <p>Hier kann der Sitzplan als PDF-Dokument exportiert werden.</p>
                            </div>
                          </div>
                        </div>
                    </div>
                    <div class="row row-eq-height">
                      <div class="card col-md-6">
                          <div class="card-body">
                            <div class="card-header m-b-1">
                              <label class="exammanagement-switch" title="Informationen sichtbar schalten"><input type="checkbox" name="datetimevisible" value="1" onclick="ajaxtoogle('datetime', jQuery(this).prop('checked')); return true" {{#datetimevisible}}checked {{/datetimevisible}}><span class="exammanagement-slider round"></span></label>
                              <span class="exammanagement-showInformationText"> Datum und Zeit für Teilnehmer sichtbar schalten (optional)</span>
                            </div>
                            <div class="card-text">
                              {{#datetimevisible}}<p>Die Informationen wurden für die Teilnehmer sichtbar geschaltet.</p>{{/datetimevisible}}
                              {{^datetimevisible}}<p>Die Informationen wurden noch nicht für die Teilnehmer sichtbar geschaltet.</span></p>{{/datetimevisible}}
                            </div>
                          </div>
                      </div>
                      <div class="card col-md-6">
                        <div class="card-body">
                          <div class="card-header m-b-1">
                            <i class="fa fa-barcode" aria-hidden="true"></i> <a>Prüfungsetiketten exportieren (optional)</a> <i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                          </div>
                          <div class="card-text">
                            <p>Hier können Prüfungsetiketten als Barcodes exportiert werden.</p>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row row-eq-height">
                      <div class="card col-md-6">
                          <div class="card-body">
                            <div class="card-header m-b-1">
                              <label class="exammanagement-switch" title="Informationen sichtbar schalten"><input type="checkbox" name="roomplacevisible" value="1" onclick="ajaxtoogle('room', jQuery(this).prop('checked')); return true"  {{#roomplacevisible}}checked {{/roomplacevisible}}><span class="exammanagement-slider round"></span></label>
                              <span class="exammanagement-showInformationText"> Räume und Sitzplätze für Teilnehmer sichtbar schalten (optional)</span>
                            </div>
                            <div class="card-text">
                              {{#roomplacevisible}}<p>Die Informationen wurden für die Teilnehmer sichtbar geschaltet.</p>{{/roomplacevisible}}
                              {{^roomplacevisible}}<p>Die Informationen wurden noch nicht für die Teilnehmer sichtbar geschaltet.</span></p>{{/roomplacevisible}}
                            </div>
                          </div>
                      </div>
                      <div class="card col-md-6">
                          <div class="card-body">
                            <div class="card-header m-b-1">
                              <i class="fa fa-file-pdf-o" aria-hidden="true"></i> Teilnehmerlisten exportieren (optional) <i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                            </div>
                            <div class="card-text">
                              <p>Hier können Teilnehmerlisten nach Name oder nach Sitzplatz sortiert als PDF-Dokument exportiert werden.</p>
                            </div>
                            <div class="card-footer">
                              <div class="row"><a class="btn btn-info col-sm-4">Name</a><p class=col-sm-4></p><a class="btn btn-info col-sm-4">Sitzplatz</a></div>
                            </div>
                          </div>
                      </div>
                    </div>
                  </div>
              </div>
            </div>
          </li>
          {{!exam}}
          <li class="item">
            <i class="fa fa-fw" aria-hidden="true"></i>
            <div class="card">
              <div class="card-block">
                <div class="row">
                    <h4 class="card-title col-sm-6">Prüfungstermin:</h4>
                    <span class="col-sm-6">
                      {{#hrexamtime}} <i class="fa fa-calendar" aria-hidden="true"></i> {{hrexamtime}} <i class="fa fa-clock-o" aria-hidden="true"></i> {{/hrexamtime}}
                      {{#hrexamtime}}{{#roomnames}} | {{/roomnames}}{{/hrexamtime}}
                      {{#roomnames}} <i class="fa fa-building-o" aria-hidden="true"></i> {{roomnames}} {{/roomnames}}
                      {{^hrexamtime}}{{^roomnames}}<p class="card-title">Noch kein Prüfungstermin gesetzt.</p>{{/roomnames}}{{/hrexamtime}}
                    </span>
                </div>
              </div>
            </div>
          </li>
          {{!after_grading}}
          <li class="item" id="aftercorrection">
            {{#thirdphasecompleted}}<i class="fa fa-check text-success" aria-hidden="true"></i>{{/thirdphasecompleted}}
            {{^thirdphasecompleted}}<i class="fa fa-fw" aria-hidden="true"></i>{{/thirdphasecompleted}}
            <div class="card">
              <div class="card-block">
                <div class="row">
                  <h4 class="card-title col-xs-11">Nach der Korrektur</h4>
                  <a type="button" class="close col-xs-1" data-toggle="collapse" data-target=".phase_three" aria-expanded="false" aria-controls="phase_three">
                      <span data-toggle="tooltip" title="Phase öffnen / schließen" aria-label="Maximieren und Minimieren"><i class="fa fa-caret-down" aria-hidden="true"></i></span>
                  </a>
                </div>
                {{#thirdphasecompleted}}<div class="collapse.show phase_three">{{/thirdphasecompleted}}
                {{^thirdphasecompleted}}<div class="collapse phase_three">{{/thirdphasecompleted}}
                  <div class="card-text">
                    <div class="row row-eq-height">
                        <div class="card col-md-6">
                          <div class="card-body">
                            <div class="card-header m-b-1">
                              <i class="fa fa-plus" aria-hidden="true"></i> <a>Bonuspunkte importieren</a> <i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                            </div>
                            <div class="card-text">
                              <p><i class="fa fa-lg fa-exclamation-triangle text-warning"></i> Es wurden noch keine Bonuspunkte importiert.</p>
                            </div>
                          </div>
                        </div>
                        <div class="card col-md-6">
                          <div class="card-body">
                            <div class="card-header m-b-1">
                              <i class="fa fa-key" aria-hidden="true"></i> <a>Notenschlüßel konfigurieren</a> <i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                            </div>
                            <div class="card-text">
                              <p><i class="fa fa-lg fa-exclamation-triangle text-warning"></i> Es wurde noch kein Notenschlüßel konfiguriert.</p>
                            </div>
                          </div>
                        </div>
                    </div>
                    <div class="row row-eq-height">
                        <div class="card col-md-6">
                          <div class="card-body">
                            <div class="card-header m-b-1">
                              <i class="fa fa-pencil" aria-hidden="true"></i> <a>Prüfungsergebnisse eingeben</a><i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                            </div>
                            <div class="card-text">
                              <p><i class="fa fa-lg fa-exclamation-triangle text-warning"></i> Es wurden noch keine Prüfungsergebnisse eingetragen.</p>
                            </div>
                          </div>
                        </div>
                        <div class="card col-md-6">
                          <div class="card-body">
                            <div class="card-header m-b-1">
                              <i class="fa fa-binoculars" aria-hidden="true"></i> <a>Eingegebene Ergebnisse prüfen (optional)</a><i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                            </div>
                            <div class="card-text">
                              <p> Hier können bereits eingegebene Prüfungsergebnisse geprüft sowie verändert werden.</p>
                            </div>
                          </div>
                        </div>
                    </div>
                  </div>
              </div>
            </div>
          </li>
          {{!after_exam}}
          <li class="item" id="afterexam">
            {{#fourthphasecompleted}}<i class="fa fa-check text-success" aria-hidden="true"></i>{{/fourthphasecompleted}}
            {{^fourthphasecompleted}}<i class="fa fa-fw" aria-hidden="true"></i>{{/fourthphasecompleted}}
            <div class="card">
              <div class="card-block">
                <div class="row">
                  <h4 class="card-title col-xs-11">Nach der Prüfung</h4>
                  <a type="button" class="close col-xs-1" data-toggle="collapse" data-target=".phase_four" aria-expanded="false" aria-controls="phase_four">
                      <span data-toggle="tooltip" title="Phase öffnen / schließen" aria-label="Maximieren und Minimieren"><i class="fa fa-caret-down" aria-hidden="true"></i></span>
                  </a>
                </div>
                {{#fourthphasecompleted}}<div class="collapse.show phase_four">{{/fourthphasecompleted}}
                {{^fourthphasecompleted}}<div class="collapse phase_four">{{/fourthphasecompleted}}
                <div class="card-text">
                  <div class="row row-eq-height">
                      <div class="card col-md-6">
                        <div class="card-body">
                          <div class="card-header m-b-1">
                            <i class="fa fa-file-pdf-o" aria-hidden="true"></i> <a>Punkte für Klausureinsicht als PDF exportieren</a><i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                          </div>
                          <div class="card-text">
                            <p>Hier können die erreichten Punkte als PDF-Dokument exportiert werden.</p>
                          </div>
                        </div>
                      </div>
                      <div class="card col-md-6">
                        <div class="card-body">
                          <div class="card-header m-b-1">
                            <i class="fa fa-file-pdf-o" aria-hidden="true"></i> <a>Ergebnisse mit Prozentangaben als PDF exportieren</a><i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                          </div>
                          <div class="card-text">
                            <p>Hier können die Ergenisse mit Prozentangaben als PDF-Dokument exportiert werden.</p>
                          </div>
                        </div>
                      </div>
                  </div>
                  <div class="row row-eq-height">
                      <div class="card col-md-6">
                        <div class="card-body">
                          <div class="card-header m-b-1">
                            <i class="fa fa-download" aria-hidden="true"></i> Ergebnisse und Statistik exportieren <i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                          </div>
                          <div class="card-text">
                            <p>Hier können die Ergenisse und Statistiken als PDF- oder Excel-Dokument exportiert werden.</p>
                          </div>
                          <div class="card-footer">
                            <div class="row"><a class="btn btn-info col-sm-4"><i class="fa fa-file-pdf-o" aria-hidden="true"></i> PDF</a><p class=col-sm-4></p><a class="btn btn-info col-sm-4"><i class="fa fa-file-excel-o" aria-hidden="true"></i> Excel</a></div>
                          </div>
                        </div>
                      </div>
                      <div class="card col-md-6">
                        <div class="card-body">
                          <div class="card-header m-b-1">
                            <i class="fa fa-file-pdf-o" aria-hidden="true"></i> <a>Ergebnisse für das Prüfungsamt exportieren</a> <i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                          </div>
                          <div class="card-text">
                            <p>Hier können die Ergebnisse für das Prüfungsamt als Excel- oder PAUL-Text-Dokument exportiert werden.</p>
                          </div>
                          <div class="card-footer">
                            <div class="row"><a class="btn btn-info col-sm-4"><i class="fa fa-file-excel-o" aria-hidden="true"></i> Excel</a><p class=col-sm-4></p><a class="btn btn-info col-sm-4"><i class="fa fa-file-text-o" aria-hidden="true"></i> Text</a></div>
                          </div>
                        </div>
                      </div>
                  </div>
                  <div class="row row-eq-height">
                      <div class="card col-md-6">
                        <div class="card-body">
                          <div class="card-text">
                          </div>
                        </div>
                      </div>
                      <div class="card col-md-6">
                        <div class="card-body">
                          <div class="card-header m-b-1">
                            <i class="fa fa-trash" aria-hidden="true"></i> <a>Prüfungsdaten löschen</a><i class="fa fa-times text-error pull-right"> Befindet sich derzeit in der Entwicklung.</i>
                          </div>
                          <div class="card-text">
                            <p><i class="fa fa-check-circle text-danger" aria-hidden="true"></i> Hier können die Prüfungsdaten endgültig gelöscht werden.</p>
                          </div>
                        </div>
                      </div>
                  </div>
                </div>
              </div>
            </div>
          </li>
          <li class="item">
            <i class="fa fa-flag" aria-hidden="true"></i>
          </li>
      </ul>
   </div>
